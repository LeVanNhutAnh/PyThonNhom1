<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speech to Text AI Assistant</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            padding: 40px;
        }

        .controls-panel {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .control-group {
            display: flex;
            gap: 20px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 150px;
            justify-content: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e6cf 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .recording {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .status-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 25px;
            background: #e9ecef;
        }

        .status-indicator.listening {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            color: white;
        }

        .status-indicator.processing {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: white;
        }

        .language-selector {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .language-selector select {
            padding: 10px 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            background: white;
            cursor: pointer;
        }

        .text-areas {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .text-area-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .text-area-container h3 {
            margin-bottom: 15px;
            color: #495057;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .text-area {
            width: 100%;
            min-height: 200px;
            padding: 20px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            line-height: 1.6;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .text-area:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .ai-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
        }

        .ai-section h3 {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .ai-response {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            min-height: 150px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-card i {
            font-size: 3em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .word-count {
            font-size: 14px;
            color: #6c757d;
            margin-top: 10px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .text-areas {
                grid-template-columns: 1fr;
            }
            
            .control-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-microphone"></i> Speech to Text AI Assistant</h1>
            <p>Chuyển đổi giọng nói thành văn bản và tương tác với AI thông minh</p>
        </div>

        <div class="main-content">
            <!-- Control Panel -->
            <div class="controls-panel">
                <div class="control-group">
                    <button id="startBtn" class="btn btn-success">
                        <i class="fas fa-microphone"></i>
                        Bắt đầu ghi âm
                    </button>
                    <button id="stopBtn" class="btn btn-danger" disabled>
                        <i class="fas fa-stop"></i>
                        Dừng ghi âm
                    </button>
                    <button id="clearBtn" class="btn btn-warning">
                        <i class="fas fa-trash"></i>
                        Xóa tất cả
                    </button>
                </div>

                <div class="control-group">
                    <div class="language-selector">
                        <label for="languageSelect"><i class="fas fa-language"></i> Ngôn ngữ:</label>
                        <select id="languageSelect">
                            <option value="vi-VN">Tiếng Việt</option>
                            <option value="en-US">English (US)</option>
                            <option value="en-GB">English (UK)</option>
                            <option value="ja-JP">日本語</option>
                            <option value="ko-KR">한국어</option>
                            <option value="zh-CN">中文</option>
                        </select>
                    </div>
                    
                    <div class="status-indicator" id="statusIndicator">
                        <i class="fas fa-circle"></i>
                        <span>Sẵn sàng</span>
                    </div>
                </div>
            </div>

            <!-- Text Areas -->
            <div class="text-areas">
                <div class="text-area-container">
                    <h3><i class="fas fa-microphone-alt"></i> Văn bản đã chuyển đổi</h3>
                    <textarea id="transcriptArea" class="text-area" placeholder="Văn bản sẽ xuất hiện ở đây khi bạn nói..."></textarea>
                    <div class="word-count" id="wordCount">0 từ</div>
                </div>

                <div class="text-area-container">
                    <h3><i class="fas fa-edit"></i> Chỉnh sửa văn bản</h3>
                    <textarea id="editArea" class="text-area" placeholder="Bạn có thể chỉnh sửa văn bản ở đây..."></textarea>
                    <button class="btn btn-primary" id="copyBtn">
                        <i class="fas fa-copy"></i>
                        Sao chép
                    </button>
                </div>
            </div>

            <!-- AI Section -->
            <div class="ai-section">
                <h3><i class="fas fa-robot"></i> Trợ lý AI thông minh</h3>
                
                <div class="ai-controls">
                    <button class="btn btn-primary" id="sendToAI">
                        <i class="fas fa-paper-plane"></i>
                        Gửi cho AI
                    </button>
                    <button class="btn btn-primary" id="translateBtn">
                        <i class="fas fa-language"></i>
                        Dịch sang tiếng Anh
                    </button>
                    <button class="btn btn-primary" id="summarizeBtn">
                        <i class="fas fa-compress-alt"></i>
                        Tóm tắt nội dung
                    </button>
                    <button class="btn btn-primary" id="improveBtn">
                        <i class="fas fa-magic"></i>
                        Cải thiện văn bản
                    </button>
                </div>

                <div class="ai-response" id="aiResponse">
                    <p><i class="fas fa-info-circle"></i> Kết quả từ AI sẽ hiển thị ở đây...</p>
                </div>
            </div>

            <!-- Features Grid -->
            <div class="features-grid">
                <div class="feature-card">
                    <i class="fas fa-microphone"></i>
                    <h4>Nhận dạng giọng nói</h4>
                    <p>Chuyển đổi giọng nói thành văn bản chính xác với hỗ trợ đa ngôn ngữ</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-robot"></i>
                    <h4>Tích hợp AI</h4>
                    <p>Gửi câu hỏi và nhận phản hồi thông minh từ trợ lý AI</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-language"></i>
                    <h4>Dịch thuật</h4>
                    <p>Dịch văn bản sang nhiều ngôn ngữ khác nhau một cách nhanh chóng</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-edit"></i>
                    <h4>Chỉnh sửa thông minh</h4>
                    <p>Cải thiện và tối ưu hóa văn bản với sự hỗ trợ của AI</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        class SpeechToTextApp {
            constructor() {
                this.recognition = null;
                this.isListening = false;
                this.transcript = '';
                
                this.initElements();
                this.initSpeechRecognition();
                this.bindEvents();
            }

            initElements() {
                this.startBtn = document.getElementById('startBtn');
                this.stopBtn = document.getElementById('stopBtn');
                this.clearBtn = document.getElementById('clearBtn');
                this.languageSelect = document.getElementById('languageSelect');
                this.statusIndicator = document.getElementById('statusIndicator');
                this.transcriptArea = document.getElementById('transcriptArea');
                this.editArea = document.getElementById('editArea');
                this.copyBtn = document.getElementById('copyBtn');
                this.wordCount = document.getElementById('wordCount');
                this.sendToAI = document.getElementById('sendToAI');
                this.translateBtn = document.getElementById('translateBtn');
                this.summarizeBtn = document.getElementById('summarizeBtn');
                this.improveBtn = document.getElementById('improveBtn');
                this.aiResponse = document.getElementById('aiResponse');
            }

            initSpeechRecognition() {
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    this.recognition = new SpeechRecognition();
                    
                    this.recognition.continuous = true;
                    this.recognition.interimResults = true;
                    this.recognition.lang = this.languageSelect.value;
                    
                    this.recognition.onstart = () => {
                        this.isListening = true;
                        this.updateStatus('listening', 'Đang nghe...', 'fas fa-microphone');
                        this.startBtn.disabled = true;
                        this.stopBtn.disabled = false;
                        this.startBtn.classList.add('recording');
                    };
                    
                    this.recognition.onresult = (event) => {
                        let interimTranscript = '';
                        let finalTranscript = this.transcript;
                        
                        for (let i = event.resultIndex; i < event.results.length; i++) {
                            const transcript = event.results[i][0].transcript;
                            if (event.results[i].isFinal) {
                                finalTranscript += transcript + ' ';
                            } else {
                                interimTranscript += transcript;
                            }
                        }
                        
                        this.transcript = finalTranscript;
                        this.transcriptArea.value = finalTranscript + interimTranscript;
                        this.editArea.value = this.transcriptArea.value;
                        this.updateWordCount();
                    };
                    
                    this.recognition.onerror = (event) => {
                        console.error('Speech recognition error:', event.error);
                        this.updateStatus('error', 'Lỗi: ' + event.error, 'fas fa-exclamation-triangle');
                        this.showNotification('Lỗi nhận dạng giọng nói: ' + event.error, 'error');
                    };
                    
                    this.recognition.onend = () => {
                        this.isListening = false;
                        this.updateStatus('ready', 'Sẵn sàng', 'fas fa-circle');
                        this.startBtn.disabled = false;
                        this.stopBtn.disabled = true;
                        this.startBtn.classList.remove('recording');
                    };
                } else {
                    this.showNotification('Trình duyệt của bạn không hỗ trợ nhận dạng giọng nói!', 'error');
                }
            }

            bindEvents() {
                this.startBtn.addEventListener('click', () => this.startListening());
                this.stopBtn.addEventListener('click', () => this.stopListening());
                this.clearBtn.addEventListener('click', () => this.clearAll());
                this.copyBtn.addEventListener('click', () => this.copyText());
                
                this.languageSelect.addEventListener('change', () => {
                    if (this.recognition) {
                        this.recognition.lang = this.languageSelect.value;
                    }
                });
                
                this.transcriptArea.addEventListener('input', () => {
                    this.editArea.value = this.transcriptArea.value;
                    this.updateWordCount();
                });
                
                this.editArea.addEventListener('input', () => {
                    this.updateWordCount();
                });
                
                // AI Functions
                this.sendToAI.addEventListener('click', () => this.sendQuestionToAI());
                this.translateBtn.addEventListener('click', () => this.translateText());
                this.summarizeBtn.addEventListener('click', () => this.summarizeText());
                this.improveBtn.addEventListener('click', () => this.improveText());
            }

            startListening() {
                if (this.recognition && !this.isListening) {
                    this.recognition.start();
                } else if (!this.recognition) {
                    this.showNotification('Nhận dạng giọng nói không được hỗ trợ!', 'error');
                }
            }

            stopListening() {
                if (this.recognition && this.isListening) {
                    this.recognition.stop();
                }
            }

            clearAll() {
                this.transcript = '';
                this.transcriptArea.value = '';
                this.editArea.value = '';
                this.aiResponse.innerHTML = '<p><i class="fas fa-info-circle"></i> Kết quả từ AI sẽ hiển thị ở đây...</p>';
                this.updateWordCount();
                this.showNotification('Đã xóa tất cả nội dung!');
            }

            copyText() {
                const textToCopy = this.editArea.value || this.transcriptArea.value;
                if (textToCopy) {
                    navigator.clipboard.writeText(textToCopy).then(() => {
                        this.showNotification('Đã sao chép văn bản!');
                    }).catch(() => {
                        this.showNotification('Lỗi khi sao chép văn bản!', 'error');
                    });
                } else {
                    this.showNotification('Không có văn bản để sao chép!', 'error');
                }
            }

            updateStatus(type, message, icon) {
                this.statusIndicator.className = `status-indicator ${type}`;
                this.statusIndicator.innerHTML = `<i class="${icon}"></i><span>${message}</span>`;
            }

            updateWordCount() {
                const text = this.editArea.value || this.transcriptArea.value;
                const words = text.trim() ? text.trim().split(/\s+/).length : 0;
                this.wordCount.textContent = `${words} từ`;
            }

            showNotification(message, type = 'success') {
                const notification = document.createElement('div');
                notification.className = 'notification';
                notification.style.backgroundColor = type === 'error' ? '#dc3545' : '#28a745';
                notification.textContent = message;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }

            // AI Functions
            async sendQuestionToAI() {
                const text = this.editArea.value || this.transcriptArea.value;
                if (!text.trim()) {
                    this.showNotification('Vui lòng nhập hoặc ghi âm nội dung trước!', 'error');
                    return;
                }

                this.showAILoading('Đang gửi câu hỏi cho AI...');
                await this.simulateAIResponse(text, 'question');
            }

            async translateText() {
                const text = this.editArea.value || this.transcriptArea.value;
                if (!text.trim()) {
                    this.showNotification('Vui lòng nhập nội dung cần dịch!', 'error');
                    return;
                }

                this.showAILoading('Đang dịch văn bản...');
                await this.simulateAIResponse(text, 'translate');
            }

            async summarizeText() {
                const text = this.editArea.value || this.transcriptArea.value;
                if (!text.trim()) {
                    this.showNotification('Vui lòng nhập nội dung cần tóm tắt!', 'error');
                    return;
                }

                this.showAILoading('Đang tóm tắt nội dung...');
                await this.simulateAIResponse(text, 'summarize');
            }

            async improveText() {
                const text = this.editArea.value || this.transcriptArea.value;
                if (!text.trim()) {
                    this.showNotification('Vui lòng nhập nội dung cần cải thiện!', 'error');
                    return;
                }

                this.showAILoading('Đang cải thiện văn bản...');
                await this.simulateAIResponse(text, 'improve');
            }

            showAILoading(message) {
                this.aiResponse.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div class="loading"></div>
                        <span>${message}</span>
                    </div>
                `;
            }

            async simulateAIResponse(text, type) {
                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const responses = {
                    'question': `
                        <h4><i class="fas fa-robot"></i> Phản hồi từ AI:</h4>
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <p><strong>Câu hỏi của bạn:</strong> "${text.substring(0, 100)}${text.length > 100 ? '...' : ''}"</p>
                            <p><strong>Trả lời:</strong> Tôi đã hiểu câu hỏi của bạn. Đây là một phản hồi mẫu từ hệ thống AI. 
                            Để có phản hồi thông minh hơn, bạn cần tích hợp với các API AI như OpenAI GPT, Google Gemini, hoặc Claude.</p>
                            <p><strong>Gợi ý phát triển:</strong></p>
                            <ul style="margin-left: 20px; color: rgba(255,255,255,0.9);">
                                <li>Tích hợp OpenAI API</li>
                                <li>Sử dụng Google AI Platform</li>
                                <li>Tích hợp với Anthropic Claude</li>
                            </ul>
                        </div>
                    `,
                    'translate': `
                        <h4><i class="fas fa-language"></i> Bản dịch tiếng Anh:</h4>
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <p><strong>Văn bản gốc:</strong> ${text.substring(0, 50)}${text.length > 50 ? '...' : ''}</p>
                            <p><strong>Bản dịch mẫu:</strong> <em>This is a simulated English translation. For accurate translation, integrate with Google Translate API or similar services.</em></p>
                        </div>
                    `,
                    'summarize': `
                        <h4><i class="fas fa-compress-alt"></i> Tóm tắt nội dung:</h4>
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <p><strong>Độ dài:</strong> ${text.length} ký tự</p>
                            <p><strong>Tóm tắt:</strong> Đây là phần tóm tắt các ý chính từ văn bản của bạn. 
                            Nội dung đã được rút gọn và tập trung vào những điểm quan trọng nhất.</p>
                        </div>
                    `,
                    'improve': `
                        <h4><i class="fas fa-magic"></i> Văn bản đã cải thiện:</h4>
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <p><strong>Văn bản cải thiện:</strong></p>
                            <div style="background: rgba(255,255,255,0.05); padding: 10px; border-radius: 5px; margin: 10px 0;">
                                <em>${text.length > 100 ? text.substring(0, 100) + '...' : text}</em>
                            </div>
                            <p><strong>Đã cải thiện:</strong> Ngữ pháp, cấu trúc câu và từ vựng</p>
                        </div>
                        <button class="btn btn-success" onclick="app.applyImprovedText('${text}')">
                            <i class="fas fa-check"></i> Áp dụng văn bản cải thiện
                        </button>
                    `
                };
                
                this.aiResponse.innerHTML = responses[type] || responses['question'];
                this.showNotification('AI đã xử lý xong yêu cầu của bạn!');
            }

            applyImprovedText(improvedText) {
                this.editArea.value = improvedText + ' (đã cải thiện)';
                this.updateWordCount();
                this.showNotification('Đã áp dụng văn bản cải thiện!');
            }
        }

        // Initialize the app when the page loads
        let app;
        document.addEventListener('DOMContentLoaded', () => {
            app = new SpeechToTextApp();
        });
    </script>
</body>
</html>